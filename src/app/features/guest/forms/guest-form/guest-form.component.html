<!--
  ~ Copyright 2021 Bundesrepublik Deutschland
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<form [formGroup]="guestForm">
  <div class="details-row">
    <div class="title">
      <h2 class="details-title">
        {{ 'guest.guest-add-component.form.guest-details.title' | translate }}
      </h2>
    </div>
    <div class="form">
      <div class="form-row">
        <mat-form-field appearance="fill" floatLabel="always" class="form-row-item">
          <mat-label>
            {{ 'guest.guest-add-component.form.guest-details.field.first-name' | translate }}
          </mat-label>
          <input matInput formControlName="firstName" id="firstName" type="text" maxlength="50" required />
          <mat-error *ngIf="guestForm.controls.firstName.hasError('maxLength')">
            {{ 'guest.guest-add-component.form.error.max-length.first-name' | translate }}
          </mat-error>
          <mat-error *ngIf="guestForm.controls.firstName.hasError('required')">
            {{ 'guest.guest-add-component.form.error.required.first-name' | translate }}
          </mat-error>
          <mat-error *ngIf="guestForm.controls.firstName.hasError('fieldContainsForbiddenCharacters')">
            {{ 'guest.guest-add-component.form.error.forbidden-characters.first-name' | translate }}
          </mat-error>
        </mat-form-field>
        <mat-form-field appearance="fill" floatLabel="always" class="form-row-item">
          <mat-label>
            {{ 'guest.guest-add-component.form.guest-details.field.last-name' | translate }}
          </mat-label>
          <input matInput formControlName="lastName" id="lastName" type="text" maxlength="50" required />
          <mat-error *ngIf="guestForm.controls.lastName.hasError('maxLength')">
            {{ 'guest.guest-add-component.form.error.max-length.last-name' | translate }}
          </mat-error>
          <mat-error *ngIf="guestForm.controls.lastName.hasError('required')">
            {{ 'guest.guest-add-component.form.error.required.last-name' | translate }}
          </mat-error>
          <mat-error *ngIf="guestForm.controls.lastName.hasError('fieldContainsForbiddenCharacters')">
            {{ 'guest.guest-add-component.form.error.forbidden-characters.last-name' | translate }}
          </mat-error>
        </mat-form-field>
      </div>
      <div class="form-row">
        <mat-form-field appearance="fill" floatLabel="always" class="form-row-item">
          <mat-label>
            {{ 'guest.guest-add-component.form.guest-details.field.company-name' | translate }}
          </mat-label>
          <input matInput formControlName="companyName" id="companyName" type="text" maxlength="200" required />
          <mat-error *ngIf="guestForm.controls.companyName.hasError('maxLength')">
            {{ 'guest.guest-add-component.form.error.max-length.company-name' | translate }}
          </mat-error>
          <mat-error *ngIf="guestForm.controls.companyName.hasError('required')">
            {{ 'guest.guest-add-component.form.error.required.company-name' | translate }}
          </mat-error>
          <mat-error *ngIf="guestForm.controls.companyName.hasError('fieldContainsForbiddenCharacters')">
            {{ 'guest.guest-add-component.form.error.forbidden-characters.company-name' | translate }}
          </mat-error>
        </mat-form-field>
        <mat-form-field appearance="fill" floatLabel="always" class="form-row-item">
          <mat-label>
            {{ 'guest.guest-add-component.form.guest-details.field.title' | translate }}
          </mat-label>
          <input matInput formControlName="title" id="title" type="text" maxlength="50" />
          <mat-error *ngIf="guestForm.controls.title.hasError('maxLength')">
            {{ 'guest.guest-add-component.form.error.max-length.title' | translate }}
          </mat-error>
          <mat-error *ngIf="guestForm.controls.title.hasError('fieldContainsForbiddenCharacters')">
            {{ 'guest.guest-add-component.form.error.forbidden-characters.title' | translate }}
          </mat-error>
        </mat-form-field>
      </div>
      <div class="form-row">
        <mat-form-field appearance="fill" floatLabel="always" class="form-row-item">
          <mat-label>
            {{ 'guest.guest-add-component.form.guest-details.field.primary-phone' | translate }}
          </mat-label>
          <input matInput formControlName="primaryPhone" id="primaryPhone" type="tel" required />
          <mat-error *ngIf="guestForm.controls.primaryPhone.hasError('required')">
            {{ 'guest.guest-add-component.form.error.required.primary-phone' | translate }}
          </mat-error>
          <mat-error *ngIf="guestForm.controls.primaryPhone.hasError('fieldContainsForbiddenCharacters')">
            {{ 'guest.guest-add-component.form.error.forbidden-characters.primary-phone' | translate }}
          </mat-error>
        </mat-form-field>
        <mat-form-field appearance="fill" floatLabel="always" class="form-row-item">
          <mat-label>
            {{ 'guest.guest-add-component.form.guest-details.field.secondary-phone' | translate }}
          </mat-label>
          <input matInput formControlName="secondaryPhone" id="secondaryPhone" type="tel" />
          <mat-error *ngIf="guestForm.controls.secondaryPhone.hasError('fieldContainsForbiddenCharacters')">
            {{ 'guest.guest-add-component.form.error.forbidden-characters.secondary-phone' | translate }}
          </mat-error>
        </mat-form-field>
      </div>
      <div class="form-row">
        <mat-form-field appearance="fill" floatLabel="always" class="form-row-item">
          <mat-label>
            {{ 'guest.guest-add-component.form.guest-details.field.email' | translate }}
          </mat-label>
          <input matInput formControlName="email" id="email" type="text" required />
          <mat-error *ngIf="guestForm.controls.email.hasError('email')">
            {{ 'guest.guest-add-component.form.error.format.email' | translate }}
          </mat-error>
          <mat-error *ngIf="guestForm.controls.email.hasError('required')">
            {{ 'guest.guest-add-component.form.error.required.email' | translate }}
          </mat-error>
        </mat-form-field>
      </div>
    </div>
  </div>
  <hr />
  <div class="details-row">
    <div class="title">
      <div class="details-title">
        {{ 'guest.guest-add-component.form.visit-details.title' | translate }}
      </div>
    </div>
    <div class="form">
      <div class="form-row">
        <mat-form-field appearance="fill" floatLabel="always" class="form-row-item">
          <mat-label>
            {{ 'guest.guest-add-component.form.visit-details.field.type-of-visit' | translate }}
          </mat-label>
          <input matInput formControlName="typeOfVisit" id="typeOfVisit" type="text" maxlength="50" required />
          <mat-error *ngIf="guestForm.controls.typeOfVisit.hasError('maxLength')">
            {{ 'guest.guest-add-component.form.error.max-length.type-of-visit' | translate }}
          </mat-error>
          <mat-error *ngIf="guestForm.controls.typeOfVisit.hasError('required')">
            {{ 'guest.guest-add-component.form.error.required.type-of-visit' | translate }}
          </mat-error>
          <mat-error *ngIf="guestForm.controls.typeOfVisit.hasError('fieldContainsForbiddenCharacters')">
            {{ 'guest.guest-add-component.form.error.forbidden-characters.type-of-visit' | translate }}
          </mat-error>
        </mat-form-field>
        <mat-form-field appearance="fill" floatLabel="always" class="form-row-item">
          <mat-label>
            {{ 'guest.guest-add-component.form.visit-details.field.location' | translate }}
          </mat-label>
          <input matInput formControlName="location" id="location" type="text" maxlength="50" required />
          <mat-error *ngIf="guestForm.controls.location.hasError('maxLength')">
            {{ 'guest.guest-add-component.form.error.max-length.location' | translate }}
          </mat-error>
          <mat-error *ngIf="guestForm.controls.location.hasError('required')">
            {{ 'guest.guest-add-component.form.error.required.location' | translate }}
          </mat-error>
          <mat-error *ngIf="guestForm.controls.location.hasError('fieldContainsForbiddenCharacters')">
            {{ 'guest.guest-add-component.form.error.forbidden-characters.location' | translate }}
          </mat-error>
        </mat-form-field>
      </div>
      <div class="form-row">
        <mat-form-field appearance="fill" floatLabel="always" class="form-row-item">
          <mat-label>
            {{ 'guest.guest-add-component.form.visit-details.field.valid-from-date' | translate }}
          </mat-label>
          <input
            matInput
            formControlName="validFromDate"
            #validFromDateRef
            [matDatepicker]="picker"
            [min]="today"
            placeholder="dd/mm/yyyy"
            [errorStateMatcher]="matcher"
            required
          />
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
          <mat-error
            *ngIf="
              guestForm.controls.validFromDate.hasError('required') ||
              guestForm.controls.validFromDate.hasError('isNotDateString')
            "
          >
            {{ 'guest.guest-add-component.form.error.format.valid-from-date.invalid-and-required' | translate }}
          </mat-error>
          <mat-error *ngIf="guestForm.controls.validFromDate.hasError('matDatepickerMin')">
            {{ 'guest.guest-add-component.form.error.format.valid-from-date.past' | translate }}
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="fill" floatLabel="always" class="form-row-item">
          <mat-label>
            {{ 'guest.guest-add-component.form.visit-details.field.valid-from-time' | translate }}
          </mat-label>
          <input
            matInput
            formControlName="validFromTime"
            #validFromTimeRef
            id="validFromTime"
            type="time"
            [errorStateMatcher]="matcher"
            required
          />
          <mat-error *ngIf="guestForm.controls.validFromTime.hasError('required')">
            {{ 'guest.guest-add-component.form.error.required.valid-from-time' | translate }}
          </mat-error>
          <mat-error *ngIf="guestForm.controls.validFromTime.hasError('invalidStartDate')">
            {{ 'guest.guest-add-component.form.error.format.valid-from-time.invalid' | translate }}
          </mat-error>
        </mat-form-field>
      </div>
      <div class="form-row">
        <mat-form-field appearance="fill" floatLabel="always" class="form-row-item">
          <mat-label>
            {{ 'guest.guest-add-component.form.visit-details.field.valid-until-date' | translate }}
          </mat-label>
          <input
            matInput
            formControlName="validUntilDate"
            #validUntilDateRef
            placeholder="dd/mm/yyyy"
            [matDatepicker]="picker2"
            [min]="today"
            [errorStateMatcher]="matcher"
            required
          />
          <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
          <mat-datepicker #picker2></mat-datepicker>
          <mat-error
            *ngIf="
              guestForm.controls.validUntilDate.hasError('required') ||
              guestForm.controls.validUntilDate.hasError('isNotDateString')
            "
          >
            {{ 'guest.guest-add-component.form.error.format.valid-until-date.invalid-and-required' | translate }}
          </mat-error>
          <mat-error *ngIf="guestForm.controls.validUntilDate.hasError('matDatepickerMin')">
            {{ 'guest.guest-add-component.form.error.format.valid-until-date.past' | translate }}
          </mat-error>
          <mat-error *ngIf="guestForm.controls.validUntilDate.hasError('invalidDataRange')">
            {{ 'guest.guest-add-component.form.error.format.valid-until-date.invalid-date-range' | translate }}
          </mat-error>
        </mat-form-field>
        <mat-form-field appearance="fill" floatLabel="always" class="form-row-item">
          <mat-label>
            {{ 'guest.guest-add-component.form.visit-details.field.valid-until-time' | translate }}
          </mat-label>
          <input
            matInput
            formControlName="validUntilTime"
            #validUntilTimeRef
            id="validUntilTime"
            type="time"
            required
            [errorStateMatcher]="matcher"
          />
          <mat-error
            *ngIf="guestForm.controls.validUntilTime.hasError('required') && guestForm.controls.validUntilTime.touched"
          >
            {{ 'guest.guest-add-component.form.error.required.valid-until-time' | translate }}
          </mat-error>
          <mat-error *ngIf="guestForm.controls.validUntilTime.hasError('invalidDataRange')">
            {{ 'guest.guest-add-component.form.error.format.valid-until-time.invalid-time-range' | translate }}
          </mat-error>
        </mat-form-field>
      </div>
      <div class="form-row" *ngIf="editMode">
        <mat-form-field appearance="fill" floatLabel="always" class="form-row-item">
          <mat-label>
            {{ 'guest.guest-add-component.form.visit-details.field.issued-by' | translate }}
          </mat-label>
          <input matInput formControlName="issuedBy" id="issuedBy" type="text" />
        </mat-form-field>
      </div>
    </div>
  </div>
  <hr />
  <div class="button-container">
    <button id="submit-button" [disabled]="guestForm.invalid" (click)="submit()">
      {{ 'guest.guest-add-component.form.button.submit' | translate }}
    </button>
  </div>
</form>
