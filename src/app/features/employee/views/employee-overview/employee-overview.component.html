<div class="title-line">
  <h1>{{ 'employee.employee-overview-component.table-title' | translate }}</h1>
  <div class="title-buttons">
    <button type="button" mat-flat-button color="primary" id="add-employee-button" (click)="goToAddEmployee()">
      <mat-icon>add</mat-icon>{{ 'employee.employee-overview-component.table-add-button' | translate }}
    </button>
  </div>
</div>

<mat-tab-group animationDuration="0ms" (selectedTabChange)="tabClick($event)">
  <mat-tab
    label="{{ 'employee.employee-overview-component.table-tab-invited' | translate }} ({{
      sum.EMPTY + sum.OPEN + sum.PENDING
    }})"
  ></mat-tab>
  <mat-tab
    label="{{ 'employee.employee-overview-component.table-tab-active' | translate }} ({{ sum.ACCEPTED }})"
  ></mat-tab>
  <mat-tab
    label="{{ 'employee.employee-overview-component.table-tab-all' | translate }} ({{
      sum.OPEN + sum.PENDING + sum.ACCEPTED + sum.CANCELLED + sum.REVOKED + sum.EMPTY
    }})"
  ></mat-tab>
</mat-tab-group>

<div class="table-row">
  <div class="table-header-row">
    <div class="search-row">
      <input class="input-field" matInput (keyup)="applyFilter($event)" #input />
      <span class="search-icon"><mat-icon>search</mat-icon></span>
    </div>
  </div>
  <table mat-table [dataSource]="dataSource" matSort>
    <ng-container matColumnDef="referenceNumber">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        {{ 'employee.employee-overview-component.table-headers.reference-number' | translate }}
      </th>
      <td mat-cell *matCellDef="let employee">{{ employee.referenceNumber }}</td>
    </ng-container>
    <ng-container matColumnDef="firstName">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        {{ 'employee.employee-overview-component.table-headers.first-name' | translate }}
      </th>
      <td mat-cell *matCellDef="let employee">{{ employee.firstName }}</td>
    </ng-container>
    <ng-container matColumnDef="lastName">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        {{ 'employee.employee-overview-component.table-headers.last-name' | translate }}
      </th>
      <td mat-cell *matCellDef="let employee">{{ employee.lastName }}</td>
    </ng-container>
    <ng-container matColumnDef="location">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        {{ 'employee.employee-overview-component.table-headers.location' | translate }}
      </th>
      <td mat-cell *matCellDef="let employee">{{ employee.location }}</td>
    </ng-container>
    <ng-container matColumnDef="status">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        {{ 'employee.employee-overview-component.table-headers.status' | translate }}
      </th>
      <td mat-cell *matCellDef="let employee">{{ employee.status }}</td>
    </ng-container>
    <ng-container matColumnDef="downloadEmail">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        {{ 'employee.employee-overview-component.table-headers.download-email' | translate }}
      </th>
      <td mat-cell *matCellDef="let employee">
        <span
          *ngIf="employee.status !== 'ACCEPTED'"
          class="material-icons-outlined"
          attr.aria-label="{{ 'employee.employee-overview-component.table-headers.download-email' | translate }}"
          id="download-email-button"
          (click)="downloadEmployeeEmailInvitation(employee.referenceNumber)"
        >
          download
        </span>
      </td>
    </ng-container>
    <ng-container matColumnDef="actionMenu">
      <th mat-header-cell *matHeaderCellDef mat-sort-header></th>
      <td mat-cell *matCellDef="let employee" (click)="goToEmployeeDetails(employee.referenceNumber)">
        <mat-icon
          aria-hidden="false"
          attr.aria-label="{{
            'employee.employee-overview-component.table-headers.action-menu.go-to-employee-details' | translate
          }}"
          >chevron_right</mat-icon
        >
      </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    <tr class="mat-row" *matNoDataRow>
      <td class="mat-cell" colspan="7">
        {{ 'employee.employee-overview-component.empty-table-message' | translate }}
        <span *ngIf="input.value">"{{ input.value }}"</span>
      </td>
    </tr>
  </table>
  <mat-paginator [pageSizeOptions]="[5, 10, 20]" [length]="dataSourceLength" [pageSize]="5"></mat-paginator>
</div>
